package assessment;

import java.io.File;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.time.Duration;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.apache.commons.io.FileUtils;
import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.WebDriverWait;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;

public class Scenario1 {
	WebDriver driver = new ChromeDriver();
	
	List<String> listofid = new ArrayList<>();
	@BeforeTest
	public void launchurl() {
	

	driver.get("https://practice.expandtesting.com/radio-buttons");
	driver.manage().window().maximize();
	 WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(5));
     
	
	accestheid();
	}
	
	
	public void accestheid() {
		
	WebElement elem	=driver.findElement(By.className("card-body"));
	List<WebElement> listofidele =  elem.findElements(By.tagName("input"));
	for(WebElement webele: listofidele) {
    	listofid.add(webele.getAttribute("id"));
    	
    	System.out.println(webele.getAttribute("id"));
        			
    }
		
	}
	
	@Test
	public void clickradio() throws InterruptedException {
		
//			driver.findElement(By.xpath("//input[@id='red']")).click();
//			Thread.sleep(1000);
//			WebElement radioButton = driver.findElement(By.xpath("//input[@id='red']"));
		
//		    ((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", radioButton);
//		    Thread.sleep(500); 
//		    radioButton.click();
//		    Thread.sleep(1000);
		
		for (int i=0;i<listofid.size()-1;i++) {
            WebElement radioButton = driver.findElement(By.id(listofid.get(i)));
            ((JavascriptExecutor) driver).executeScript("arguments[0].scrollIntoView(true);", radioButton);
            Thread.sleep(500); // Add a small wait to ensure element is in view
            radioButton.click();
            captureScreenshot();
            Thread.sleep(1000); 
			
			
		}
		
		
	}
	

	public void captureScreenshot() {
	    TakesScreenshot ts = (TakesScreenshot) driver;
	    File source = ts.getScreenshotAs(OutputType.FILE);
	    try {
	        // Ensure the target directory exists
	        File targetDir = new File("/home/zadmin/Desktop/screenshots/");
	        if (!targetDir.exists()) {
	            targetDir.mkdirs();
	        }

	        // Generate timestamp and use it as the test name
	        String timestamp = new SimpleDateFormat("yyyyMMddHHmmss").format(new Date());
	        String testName = "screenshot_" + timestamp;

	        // Create the file with the generated test name and timestamp
	        FileUtils.copyFile(source, new File(targetDir, testName + ".png"));
	        System.out.println("Screenshot taken with name: " + testName);
	    } catch (IOException e) {
	        System.out.println("Exception while taking screenshot: " + e.getMessage());
	    }
	}
	
	@AfterTest
	public void driverquit()
	{
		driver.quit();
	}
}
	
	
	
	
	
	

